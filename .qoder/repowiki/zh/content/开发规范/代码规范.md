# 代码规范

<cite>
**Referenced Files in This Document**   
- [eslint.config.mjs](file://eslint.config.mjs)
- [package.json](file://package.json)
- [tsconfig.json](file://tsconfig.json)
- [vite.config.ts](file://vite.config.ts)
- [README.md](file://README.md)
</cite>

## 目录
1. [引言](#引言)
2. [ESLint 规则集配置](#eslint-规则集配置)
3. [核心代码规范](#核心代码规范)
4. [样式规则与格式化](#样式规则与格式化)
5. [开发环境集成](#开发环境集成)
6. [与 Prettier 协同工作](#与-prettier-协同工作)
7. [常见问题解决方案](#常见问题解决方案)
8. [结论](#结论)

## 引言
本项目采用现代化的前端技术栈，集成了 ESLint 作为代码质量检查工具。通过 `eslint.config.mjs` 配置文件，项目定义了一套完整的代码规范体系，旨在确保代码的一致性、可读性和可维护性。该规范基于 Airbnb 基础规则，并结合 TypeScript 和 React 项目的特点进行了扩展和定制。本文档详细说明了项目的代码规范，包括使用的 ESLint 规则集、代码格式化标准、样式规则以及在开发环境中的集成方式。

**Section sources**
- [README.md](file://README.md#L1-L173)

## ESLint 规则集配置
项目通过 `eslint.config.mjs` 文件配置了多层 ESLint 规则集，形成了一个完整的代码检查体系。

### 基础规则集
项目引入了多个官方推荐的规则集作为基础：
- `eslint.configs.recommended`：ESLint 内置的推荐规则
- `tseslint.configs.recommended`：TypeScript ESLint 的推荐规则
- `pluginCypress.configs.recommended`：Cypress 测试框架的推荐规则

### Airbnb 规则扩展
通过 `FlatCompat` 兼容层，项目扩展了 `airbnb` 规则集，这是业界广泛采用的 JavaScript 代码风格指南。Airbnb 规则集提供了严格的代码质量检查，涵盖了变量声明、函数使用、模块导入等多个方面。

### 插件系统
项目配置了多个 ESLint 插件以支持特定技术栈：
- `@stylistic/eslint-plugin`：提供代码样式相关的规则
- `eslint-plugin-cypress`：为 Cypress E2E 测试提供支持

**Section sources**
- [eslint.config.mjs](file://eslint.config.mjs#L1-L73)

## 核心代码规范
项目定义了一系列关键规则来确保代码质量和一致性。

### 引号使用规范
```js
quotes: ["error", "double"]
```
该规则强制要求使用双引号而非单引号来包裹字符串。这是项目统一的代码风格，有助于保持代码库的一致性。在实际编码中，所有字符串字面量都应使用双引号，包括 JSX 属性值和普通字符串。

### JSX 文件扩展名规范
```js
"react/jsx-filename-extension": ["error", {
  extensions: [".jsx", ".tsx"]
}]
```
此规则要求包含 JSX 语法的文件必须使用 `.jsx` 或 `.tsx` 作为文件扩展名。在本项目中，所有 React 组件文件均采用 `.tsx` 扩展名，这不仅符合 TypeScript 项目的要求，也明确标识了文件的用途。

### 模块导入扩展名规范
```js
"import/extensions": ["error", "ignorePackages", {
  js: "never",
  jsx: "never",
  ts: "never",
  tsx: "never",
}]
```
该规则禁止在导入模块时指定文件扩展名（除了包依赖）。这意味着在导入项目内部模块时，不应包含 `.js`、`.ts` 等扩展名。这一规范简化了导入语句，提高了代码的可读性，并与 Vite 的模块解析机制保持一致。

**Section sources**
- [eslint.config.mjs](file://eslint.config.mjs#L52-L72)

## 样式规则与格式化
项目通过 `@stylistic` 插件和相关配置定义了详细的代码样式规则。

### @stylistic 插件
`@stylistic/eslint-plugin` 是一个专注于代码样式的 ESLint 插件，它提供了一系列规则来控制代码的外观和格式。虽然具体规则未在配置文件中显式列出，但该插件的引入表明项目重视代码的视觉一致性。

### TypeScript 配置
`tsconfig.json` 文件中的配置与 ESLint 规则相辅相成：
- `"strict": true` 启用了所有严格的类型检查选项
- `"jsx": "react-jsx"` 指定了 JSX 转换方式
- `"baseUrl": "./"` 和 `"paths"` 配置了模块解析路径，支持 `@/*` 别名导入

### 别名配置
项目在 ESLint 和 Vite 配置中都定义了路径别名：
- ESLint 的 `import/resolver` 配置了 `@` 别名指向 `./src/`
- Vite 的 `resolve.alias` 也配置了相同的别名
这种双重配置确保了开发工具和构建工具对模块路径的解析保持一致。

**Section sources**
- [eslint.config.mjs](file://eslint.config.mjs#L30-L51)
- [tsconfig.json](file://tsconfig.json#L1-L100)
- [vite.config.ts](file://vite.config.ts#L1-L52)

## 开发环境集成
项目提供了完整的开发环境集成方案，确保代码规范在开发过程中得到有效执行。

### 编辑器配置
虽然项目中未直接包含编辑器配置文件，但根据 `README.md` 中的技术栈说明，开发者应配置编辑器以支持 ESLint。推荐的配置包括：
- 安装 ESLint 插件
- 启用保存时自动修复功能
- 显示实时错误和警告

### 脚本命令
`package.json` 中定义了专门的 ESLint 脚本：
```json
"scripts": {
  "eslint": "eslint src"
}
```
该命令允许开发者手动运行 ESLint 检查整个 `src` 目录下的代码。

### 自动修复技巧
ESLint 支持自动修复部分可修复的规则问题。开发者可以使用以下命令：
```bash
npx eslint src --fix
```
这将自动修复引号、分号、缩进等格式问题，提高开发效率。

**Section sources**
- [package.json](file://package.json#L1-L60)
- [README.md](file://README.md#L1-L173)

## 与 Prettier 协同工作
尽管项目技术栈中提到了 Prettier，但在配置文件中并未发现直接的 Prettier 集成。

### 当前状态分析
通过搜索项目中的 `prettier` 关键字，发现：
- `README.md` 中列出了 Prettier 作为技术栈的一部分
- 但没有找到 `prettier.config` 文件或相关配置
- `package.json` 中未列出 Prettier 作为依赖

### 协同工作建议
为了实现 ESLint 和 Prettier 的最佳协同，建议：
1. 安装 `prettier` 和 `eslint-config-prettier`
2. 创建 `prettier.config.js` 配置文件
3. 在 ESLint 配置中添加 `prettier` 规则集以禁用与 Prettier 冲突的规则
4. 配置编辑器优先使用 Prettier 进行格式化

这种配置模式可以实现 ESLint 负责代码质量和潜在错误检查，而 Prettier 专注于代码格式化。

**Section sources**
- [README.md](file://README.md#L1-L173)
- [package.json](file://package.json#L1-L60)

## 常见问题解决方案
针对项目代码规范实施过程中可能遇到的问题，提供以下解决方案。

### 模块解析错误
当使用 `@/*` 别名导入模块时，如果出现解析错误：
1. 确保 `tsconfig.json` 的 `paths` 配置正确
2. 确保 `eslint.config.mjs` 的 `import/resolver` 配置正确
3. 重启编辑器以刷新类型检查器

### 类型检查问题
由于项目启用了严格的 TypeScript 检查，可能会遇到类型错误：
1. 确保所有变量都有明确的类型注解
2. 使用非空断言操作符 `!` 时要谨慎
3. 为第三方库提供适当的类型声明

### ESLint 忽略特定文件
对于测试文件或特定类型的文件，可以通过以下方式忽略：
1. 在 `eslint.config.mjs` 的 `ignores` 数组中添加模式
2. 在文件顶部添加 `/* eslint-disable */` 注释
3. 使用 `.eslintignore` 文件

**Section sources**
- [tsconfig.json](file://tsconfig.json#L1-L100)
- [eslint.config.mjs](file://eslint.config.mjs#L1-L73)

## 结论
本项目的代码规范体系建立在 ESLint 的基础上，结合了 Airbnb 的最佳实践和项目特定的需求。通过严格的规则配置，确保了代码的质量和一致性。虽然当前 Prettier 的集成尚不完整，但已有的 ESLint 配置为项目提供了坚实的代码质量保障。建议完善 Prettier 集成，实现代码质量和格式化的最佳平衡。开发者应遵循这些规范，利用工具的自动修复功能，提高开发效率和代码质量。