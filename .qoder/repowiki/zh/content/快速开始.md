# 快速开始

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [package.json](file://package.json)
- [vite.config.ts](file://vite.config.ts)
- [jest.config.ts](file://jest.config.ts)
- [cypress.config.ts](file://cypress.config.ts)
- [src/pages/home.tsx](file://src/pages/home.tsx)
- [src/pages/User/Login.tsx](file://src/pages/User/Login.tsx)
- [src/pages/Settings/index.tsx](file://src/pages/Settings/index.tsx)
</cite>

## 目录
1. [简介](#简介)
2. [环境准备](#环境准备)
3. [项目初始化](#项目初始化)
4. [开发服务器启动](#开发服务器启动)
5. [生产构建](#生产构建)
6. [测试运行](#测试运行)
7. [脚本功能详解](#脚本功能详解)
8. [常见问题与解决方案](#常见问题与解决方案)
9. [故障排除指南](#故障排除指南)

## 简介
本指南提供从零开始搭建和运行 React VSCode 模板项目的完整流程。项目基于 React 19，集成 TypeScript、Vite、Zustand、Ant Design 和 Tailwind CSS 等现代前端技术栈，并展示了 React 19 新特性 `useOptimistic` 的实际应用。

**Section sources**
- [README.md](file://README.md#L1-L20)

## 环境准备
在开始之前，请确保您的开发环境已安装以下工具：

- **Node.js** (建议 v18 或更高版本)
- **Yarn** (v1.22.22 或更高版本)
- **Git** (用于版本控制和依赖管理)

您可以通过以下命令验证环境是否正确安装：
```bash
node --version
yarn --version
git --version
```

推荐使用 nvm（Node Version Manager）来管理 Node.js 版本，确保项目兼容性。

**Section sources**
- [package.json](file://package.json#L1-L10)

## 项目初始化
### 安装依赖
进入项目根目录后，执行以下命令安装所有依赖：

```bash
yarn install
```

该命令将根据 `package.json` 和 `yarn.lock` 文件安装项目所需的所有依赖包。首次安装可能需要几分钟时间，具体取决于网络速度。

**注意**：项目使用 Yarn 作为包管理器，不建议使用 npm 安装依赖，以免出现版本冲突。

**Section sources**
- [README.md](file://README.md#L67-L70)
- [package.json](file://package.json#L1-L10)

## 开发服务器启动
### 启动开发模式
安装完成后，启动开发服务器：

```bash
yarn start
```

此命令将启动 Vite 开发服务器，默认监听端口为 3123。您可以在浏览器中访问 `http://localhost:3123` 查看应用。

**预期输出**：
```
vite v7.1.9 dev server running at:
> Local: http://localhost:3123/
> Network: use `--host` to expose
```

开发服务器支持热模块替换（HMR），代码修改后浏览器将自动刷新。

**端口配置**：开发服务器端口在 `vite.config.ts` 中配置为 3123，如需修改，请编辑该文件中的 `server.port` 字段。

**Section sources**
- [README.md](file://README.md#L73-L76)
- [package.json](file://package.json#L7-L8)
- [vite.config.ts](file://vite.config.ts#L48-L51)

## 生产构建
### 构建生产版本
当准备部署应用时，执行以下命令生成生产环境优化的静态资源：

```bash
yarn build
```

此命令将使用 Vite 构建工具对代码进行压缩、混淆和打包，输出文件位于 `dist/` 目录。

**预期输出**：
```
vite v7.1.9 building for production...
transforming...
✓ 37 modules transformed.
dist/index.html                  0.45 kB
dist/assets/index-*.js           142.32 kB
dist/assets/index-*.css          12.45 kB
```

构建完成后，您可以使用静态服务器部署 `dist/` 目录中的文件。

### 预览生产版本
在本地预览生产构建结果：

```bash
yarn serve
```

此命令将启动一个静态文件服务器，用于预览 `dist/` 目录中的内容。

**Section sources**
- [README.md](file://README.md#L79-L82)
- [package.json](file://package.json#L13-L14)
- [vite.config.ts](file://vite.config.ts#L48-L51)

## 测试运行
### 单元测试
运行项目中的单元测试：

```bash
yarn test
```

此命令将使用 Jest 执行所有测试文件（`.test.tsx`），包括组件、服务和状态管理的测试。测试配置在 `jest.config.ts` 中定义，使用 jsdom 作为测试环境。

**预期输出**：
```
PASS src/__tests__/App.test.tsx
PASS src/__tests__/components/Home.test.tsx
PASS src/__tests__/services.test.tsx
Test Suites: 5 passed, 5 total
Tests: 12 passed, 12 total
```

### 端到端测试
启动 Cypress E2E 测试界面：

```bash
yarn e2e
```

此命令将打开 Cypress 测试运行器，允许您交互式地运行和调试端到端测试。测试文件位于 `cypress/e2e/` 目录。

若要在无头模式下运行所有测试：

```bash
yarn e2e:run
```

**Cypress 配置**：基础 URL 设置为 `http://localhost:3123`，与开发服务器端口一致。

**Section sources**
- [README.md](file://README.md#L85-L90)
- [package.json](file://package.json#L9-L12)
- [jest.config.ts](file://jest.config.ts#L1-L23)
- [cypress.config.ts](file://cypress.config.ts#L1-L24)

## 脚本功能详解
以下是 `package.json` 中定义的所有 npm/yarn 脚本及其功能说明：

| 脚本名称 | 命令 | 功能描述 |
|---------|------|---------|
| `start` | `vite` | 启动开发服务器，支持热重载 |
| `build` | `vite build` | 构建生产环境优化的静态资源 |
| `serve` | `vite preview` | 预览生产构建结果 |
| `test` | `jest` | 运行单元测试和组件测试 |
| `e2e` | `cypress open` | 启动 Cypress 图形化测试界面 |
| `e2e:run` | `cypress run` | 在无头模式下运行所有 E2E 测试 |
| `css` | `postcss ...` | 处理 Tailwind CSS 样式文件 |
| `eslint` | `eslint src` | 执行代码规范检查 |

**Section sources**
- [package.json](file://package.json#L5-L18)

## 常见问题与解决方案
### 端口被占用
如果端口 3123 已被占用，开发服务器将无法启动。解决方案：

1. 终止占用端口的进程：
   ```bash
   # macOS/Linux
   lsof -i :3123
   kill -9 <PID>

   # Windows
   netstat -ano | findstr :3123
   taskkill /PID <PID> /F
   ```

2. 或修改 `vite.config.ts` 中的端口号。

### 依赖安装失败
若 `yarn install` 失败，请尝试：

```bash
# 清除缓存
yarn cache clean

# 重新安装
rm -rf node_modules yarn.lock
yarn install
```

### 环境变量问题
项目使用 `.npmrc` 文件配置 npm 行为，确保 `scripts-prepend-node-path=true` 设置正确，避免 Node.js 路径问题。

**Section sources**
- [vite.config.ts](file://vite.config.ts#L48-L51)
- [package.json](file://package.json#L1-L10)
- [.npmrc](file://.npmrc#L1-L2)

## 故障排除指南
### 开发服务器无法启动
- 检查 Node.js 和 Yarn 版本是否符合要求
- 确认端口未被其他进程占用
- 查看控制台错误日志，定位具体问题

### 构建失败
- 检查 TypeScript 类型错误
- 确认所有依赖已正确安装
- 查看 Vite 构建日志中的具体错误信息

### 测试无法运行
- 确保开发服务器正在运行（E2E 测试需要）
- 检查 Jest 配置文件 `jest.config.ts`
- 验证测试文件路径和命名规范

### CSS 样式不生效
- 确保已运行 `yarn css` 命令处理 Tailwind 样式
- 检查 `postcss.config.js` 配置是否正确
- 验证 `tailwind.config.js` 中的 purge 配置路径

**Section sources**
- [README.md](file://README.md#L1-L173)
- [vite.config.ts](file://vite.config.ts#L1-L52)
- [jest.config.ts](file://jest.config.ts#L1-L23)
- [cypress.config.ts](file://cypress.config.ts#L1-L24)
- [src/tailwind/postcss.config.js](file://src/tailwind/postcss.config.js#L1-L18)
- [src/tailwind/tailwind.config.js](file://src/tailwind/tailwind.config.js#L1-L13)